<h1 style="font-size:2em;text-align:center;"><strong>Historique des actions</strong></h1>
<br>
<br>
<div>
    <div  class="grid grid-cols-8 gap-4">
        <div>
            <p-multiSelect [maxSelectedLabels]="selectedEntities.length" filterMatchMode="contains"
            placeholder="Entité" [options]="entityOptions" [(ngModel)]="selectedEntities"
            optionLabel="entityName" [style]="{'width':'300px'}"
            (onFilter)="searchEntity($event)"></p-multiSelect>
            <!-- <input [hidden]="!showCode" class="w-4/5" pInputText type="text" placeholder="code client"
            [(ngModel)]="customerCode" /> -->
        </div>
        <div>
            <p-dropdown [style]="{'minWidth':'100%', 'margin-bottom':'1rem'}" 
            [options]="typeList" 
            [(ngModel)]="typeFilter" 
            optionValue="Id" optionLabel="Name"
            placeholder="Type d'action"/>
        </div>
        <div>
            <p-dropdown [style]="{'minWidth':'100%', 'margin-bottom':'1rem'}" 
            [options]="specificList" 
            [(ngModel)]="selectedSp" 
            optionValue="Id" optionLabel="name"
            placeholder="Action spécifique"/>
        </div>
        <div>
            <p-multiSelect [maxSelectedLabels]="selectedcustomerType.length" filterMatchMode="contains"
                            placeholder="Type client" [options]="customerTypeOptions" [(ngModel)]="selectedcustomerType"
                            optionLabel="typeLabel" [style]="{'width':'300px'}"
                            (onFilter)="searchTypes($event)"></p-multiSelect>
        </div>
        <div class="card flex justify-content-center">
            <p-floatLabel>
                <p-autoComplete 
                    [(ngModel)]="recFilter" 
                    [suggestions]="recovrerOptions" 
                    inputId="float-label" />
                <label for="float-label">Chargé de recouvrement</label>
            </p-floatLabel>
        </div>
        <div>
            <p-multiSelect [maxSelectedLabels]="selectedcustomerClass.length" filterMatchMode="contains"
            placeholder="Classe client" [options]="customerClassOptions"
            [(ngModel)]="selectedcustomerClass" optionLabel="classLabel" [style]="{'width':'300px'}"
            (onFilter)="searchClasses($event)"></p-multiSelect>

        </div>
        <div>
            <p-multiSelect filterBy="regionLabel,regionValue" [maxSelectedLabels]="selectedRegion.length"
            filterMatchMode="contains" placeholder="Région" [options]="regionOptions"
            [(ngModel)]="selectedRegion" optionLabel="regionLabel"
            [style]="{'width':'300px'}"></p-multiSelect>
        </div>
        <div>
            <p-button icon="pi pi-search"  />
        </div>
        <div>
            <p-button (click)="clearFiltre()" icon="pi pi-filter-slash" [style]="{'margin-left': '10%'}"></p-button>
        </div>
       
      
  
    </div>
</div>
<br>

<div class="card">
    <p-table #dt  [value]="histories" [tableStyle]="{ 'min-width': '50rem' }" 
    (sortFunction)="actionSort($event)" [customSort]="true"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rowsPerPageOptions]="[5, 10, 20]" [lazy]="true"
    (onLazyLoad)="($event)" [paginator]="true"
    [rows]="10" [totalRecords]="totalRecords">
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="date" style="width:20%">
                    Date de l'action <p-sortIcon field="date" />
                </th>
                <th>Type d'action</th>
                <th>N° pièce</th>
                <th>Code client</th>
                <th>Société/Raison sociale</th>
                <th>Montant de l'action</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-history>
            <tr>
                <td>{{ history.code }}</td>
                <td>{{ history.name }}</td>
                <td>{{ history.category }}</td>
                <td>{{ history.quantity }}</td>
                <td>{{ history.quantity }}</td>
                <td>{{ history.quantity }}</td>
            </tr>
        </ng-template>
    </p-table>
</div>
